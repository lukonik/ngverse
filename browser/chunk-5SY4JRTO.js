import{h as U}from"./chunk-AC2A7OJH.js";import{$ as f,C as u,Da as H,Dc as S,Ea as R,F as w,Fc as B,Ha as p,Hc as L,Ib as N,Ma as y,Mc as k,Vc as _,W as d,Y as c,bb as F,ca as O,fa as n,g as b,j as a,l,n as r,qc as D,r as v,s as g,sa as E,wb as m,xb as P,y as M,za as A}from"./chunk-4E37DFQL.js";var j=new O("HIGHLIGHT_OPTIONS");function re(t){return[{provide:j,useValue:t}]}var o=function(t){return t.FULL_WITH_CORE_LIBRARY_IMPORTS="The full library and the core library were imported, only one of them should be imported!",t.FULL_WITH_LANGUAGE_IMPORTS="The highlighting languages were imported they are not needed!",t.CORE_WITHOUT_LANGUAGE_IMPORTS="The highlighting languages were not imported!",t.LANGUAGE_WITHOUT_CORE_IMPORTS="The core library was not imported!",t.NO_FULL_AND_NO_CORE_IMPORTS="Highlight.js library was not imported!",t}(o||{}),W=(()=>{class t{constructor(){this.document=n(k),this.isPlatformBrowser=_(n(y)),this.options=n(j,{optional:!0}),this._ready=new b(null),this.ready=v(this._ready.asObservable().pipe(u(e=>!!e))),this.isPlatformBrowser&&(this.document.defaultView.hljs?this._ready.next(this.document.defaultView.hljs):this._loadLibrary().pipe(d(e=>this.options?.lineNumbersLoader?(this.document.defaultView.hljs=e,this.loadLineNumbers().pipe(c(i=>{i.activateLineNumbers(),this._ready.next(e)}))):(this._ready.next(e),a)),w(e=>(console.error("[HLJS] ",e),this._ready.error(e),a))).subscribe(),this.options?.themePath&&this.loadTheme(this.options.themePath))}_loadLibrary(){if(this.options){if(this.options.fullLibraryLoader&&this.options.coreLibraryLoader)return r(()=>o.FULL_WITH_CORE_LIBRARY_IMPORTS);if(this.options.fullLibraryLoader&&this.options.languages)return r(()=>o.FULL_WITH_LANGUAGE_IMPORTS);if(this.options.coreLibraryLoader&&!this.options.languages)return r(()=>o.CORE_WITHOUT_LANGUAGE_IMPORTS);if(!this.options.coreLibraryLoader&&this.options.languages)return r(()=>o.LANGUAGE_WITHOUT_CORE_IMPORTS);if(this.options.fullLibraryLoader)return this.loadFullLibrary();if(this.options.coreLibraryLoader&&this.options.languages&&Object.keys(this.options.languages).length)return this.loadCoreLibrary().pipe(d(e=>this._loadLanguages(e)))}return r(()=>o.NO_FULL_AND_NO_CORE_IMPORTS)}_loadLanguages(e){let i=Object.entries(this.options.languages).map(([s,C])=>T(C()).pipe(c(G=>e.registerLanguage(s,G))));return M(i).pipe(g(()=>e))}loadCoreLibrary(){return T(this.options.coreLibraryLoader())}loadFullLibrary(){return T(this.options.fullLibraryLoader())}loadLineNumbers(){return l(this.options.lineNumbersLoader())}setTheme(e){this.isPlatformBrowser&&(this._themeLinkElement?this._themeLinkElement.href=e:this.loadTheme(e))}loadTheme(e){this._themeLinkElement=this.document.createElement("link"),this._themeLinkElement.href=e,this._themeLinkElement.type="text/css",this._themeLinkElement.rel="stylesheet",this._themeLinkElement.media="screen,print",this.document.head.appendChild(this._themeLinkElement)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),T=t=>l(t).pipe(u(h=>!!h?.default),g(h=>h.default)),V=(()=>{class t{constructor(){this.loader=n(W),this.options=n(j,{optional:!0}),this.hljsSignal=p(null),this.hljs=B(()=>this.hljsSignal()),this.loader.ready.then(e=>{this.hljsSignal.set(e),this.options?.highlightOptions&&e.configure(this.options.highlightOptions)})}async highlight(e,i){return(await this.loader.ready).highlight(e,i)}async highlightAuto(e,i){return(await this.loader.ready).highlightAuto(e,i)}async highlightElement(e){(await this.loader.ready).highlightElement(e)}async highlightAll(){(await this.loader.ready).highlightAll()}async configure(e){(await this.loader.ready).configure(e)}async registerLanguage(e,i){(await this.loader.ready).registerLanguage(e,i)}async unregisterLanguage(e){(await this.loader.ready).unregisterLanguage(e)}async registerAliases(e,{languageName:i}){(await this.loader.ready).registerAliases(e,{languageName:i})}async listLanguages(){return(await this.loader.ready).listLanguages()}async getLanguage(e){return(await this.loader.ready).getLanguage(e)}async safeMode(){(await this.loader.ready).safeMode()}async debugMode(){(await this.loader.ready).debugMode()}async lineNumbersBlock(e,i){let s=await this.loader.ready;s.lineNumbersBlock&&s.lineNumbersBlock(e,i)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),I;function z(){if(!I)try{I=window?.trustedTypes?.createPolicy("ngx-highlightjs",{createHTML:t=>t})}catch{}return I}function Y(t){return z()?.createHTML(t)||t}var x=(()=>{class t{constructor(){this._hljs=n(V),this._nativeElement=n(R).nativeElement,this._sanitizer=n(U),this._platform=n(y),_(this._platform)&&(L(()=>{let e=this.code();this.setTextContent(e||""),e&&this.highlightElement(e)}),L(()=>{let e=this.highlightResult();this.setInnerHTML(e?.value),this.highlighted.emit(e)}))}setTextContent(e){requestAnimationFrame(()=>this._nativeElement.textContent=e)}setInnerHTML(e){requestAnimationFrame(()=>this._nativeElement.innerHTML=Y(this._sanitizer.sanitize(F.HTML,e)||""))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275dir=m({type:t,standalone:!1})}}return t})(),oe=(()=>{class t extends x{constructor(){super(...arguments),this.code=H(null,{alias:"highlight"}),this.highlightResult=p(null),this.highlighted=new A}async highlightElement(e){let i=await this._hljs.highlight(e,{language:this.language,ignoreIllegals:this.ignoreIllegals});this.highlightResult.set(i)}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=E(t)))(s||t)}})()}static{this.\u0275dir=m({type:t,selectors:[["","highlight",""]],hostVars:2,hostBindings:function(i,s){i&2&&N("hljs",!0)},inputs:{code:[1,"highlight","code"],language:"language",ignoreIllegals:[2,"ignoreIllegals","ignoreIllegals",S]},outputs:{highlighted:"highlighted"},features:[D([{provide:x,useExisting:t}]),P]})}}return t})();export{re as a,oe as b};
