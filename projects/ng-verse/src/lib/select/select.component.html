<button
  [class.stretch]="stretch()"
  class="select-button"
  #selectButton
  appPopoverTrigger
  #trigger="appPopoverTrigger"
>
  <span>{{ selectedOptionLabel() || placeholder() }}</span>
  <app-select-icon
    class="select-button-icon"
    [class.opened]="isOpen()"
  ></app-select-icon>
</button>

<app-popover
  [isOpen]="isOpen()"
  [trigger]="trigger"
  (opened)="panelOpened()"
  (closed)="panelClosed()"
  [offsetY]="40"
>
  <ul
    class="select-options"
    [style.width.px]="selectButton.clientWidth"
    cdkListbox
    [cdkListboxCompareWith]="compareWith()"
    [cdkListboxValue]="listboxValue()"
    (cdkListboxValueChange)="listboxValueChange($event)"
  >
    @for (option of options(); track $index) {
    <li class="option" [cdkOption]="getOptionValue(option)">
      {{ getOptionLabel(option) }}
    </li>
    }
  </ul>
</app-popover>
