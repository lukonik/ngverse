<button
  [class.stretch]="stretch()"
  class="select-button"
  #selectButton
  appPopoverTrigger
  #trigger="appPopoverTrigger"
>
  <span>{{ selectedOptionLabel() || placeholder() }}</span>
  <app-select-icon
    class="select-button-icon"
    [class.opened]="isOpen()"
  ></app-select-icon>
</button>

<ul
  cdkListbox
  [cdkListboxCompareWith]="compareWith()"
  [cdkListboxValue]="listboxValue()"
  (cdkListboxValueChange)="listboxValueChange($event)"
>
  <app-popover
    [isOpen]="isOpen()"
    [trigger]="trigger"
    (opened)="panelOpened()"
    (closed)="panelClosed()"
    [offsetY]="40"
  >
    <div class="select-options" [style.width.px]="selectButton.clientWidth">
      @for (option of options(); track $index) {
      <li class="option" [cdkOption]="getOptionValue(option)">
        {{ getOptionLabel(option) }}
      </li>
      }
    </div>
  </app-popover>
</ul>
