{
  "version": 3,
  "sources": ["projects/ngverse/src/lib/ui/switch/switch.component.ts", "projects/ngverse/src/lib/ui/switch/switch.component.html"],
  "sourcesContent": ["import { _IdGenerator } from '@angular/cdk/a11y';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  effect,\n  inject,\n  input,\n  signal,\n} from '@angular/core';\nimport {\n  AbstractControl,\n  ControlValueAccessor,\n  NG_VALIDATORS,\n  NG_VALUE_ACCESSOR,\n  ValidationErrors,\n  Validator,\n} from '@angular/forms';\n\ntype OnChangeFunction = ((_: unknown) => void) | undefined;\n\ntype OnTouchedFunction = (() => void) | undefined;\n\ntype VALUE_TYPE = boolean | undefined | null;\n\ntype ValidatorChangeFunction = (() => void) | undefined;\n\ntype LABEL_ALIGN = 'start' | 'end';\n\n@Component({\n  selector: 'app-switch',\n  imports: [],\n  templateUrl: './switch.component.html',\n  styleUrl: './switch.component.css',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: SwitchComponent,\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: SwitchComponent,\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    role: 'group',\n    '[class.disabled]': 'disabled()',\n    '[class.checked]': 'value()',\n    '[class.start]': 'labelAlign() === \"start\"',\n    '[attr.aria-labelledby]': 'labelId',\n  },\n})\nexport class SwitchComponent implements ControlValueAccessor, Validator {\n  labelAlign = input<LABEL_ALIGN>('end');\n  required = input<boolean>(false);\n\n  value = signal<VALUE_TYPE>(undefined);\n  private _idGenerator = inject(_IdGenerator);\n\n  buttonId = this._idGenerator.getId('switch-button-');\n  labelId = this._idGenerator.getId('switch-label-');\n  disabled = signal<boolean>(false);\n\n  private _registerOnChangefn: OnChangeFunction;\n  private _onTouchedfn: OnTouchedFunction;\n  private _validatorChangefn: ValidatorChangeFunction;\n\n  constructor() {\n    effect(() => {\n      this.required();\n      this._validatorChangefn?.();\n    });\n  }\n\n  toggle() {\n    if (this.disabled()) {\n      return;\n    }\n    this._onTouchedfn?.();\n    const newValue = !this.value();\n    this.value.set(newValue);\n    this._registerOnChangefn?.(newValue);\n  }\n\n  writeValue(obj: unknown): void {\n    this.value.set(!!obj);\n  }\n  registerOnChange(fn: OnChangeFunction): void {\n    this._registerOnChangefn = fn;\n  }\n\n  registerOnValidatorChange(fn: () => void): void {\n    this._validatorChangefn = fn;\n  }\n\n  registerOnTouched(fn: OnTouchedFunction): void {\n    this._onTouchedfn = fn;\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.disabled.set(isDisabled);\n  }\n\n  validate(control: AbstractControl<boolean>): ValidationErrors | null {\n    const hasRequiredValidator = this.required();\n    return hasRequiredValidator && control.value !== true\n      ? { required: true }\n      : null;\n  }\n}\n", "<button\n  [disabled]=\"disabled()\"\n  [id]=\"buttonId\"\n  role=\"switch\"\n  class=\"switch-button\"\n  [class.checked]=\"value()\"\n  [attr.aria-checked]=\"value()\"\n  (click)=\"toggle()\"\n>\n  <div class=\"toggle\"></div>\n</button>\n<label [htmlFor]=\"buttonId\" [id]=\"labelId\">\n  <ng-content></ng-content>\n</label>\n"],
  "mappings": "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",
  "names": []
}
