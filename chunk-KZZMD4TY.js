import{a as K}from"./chunk-AK5KORLJ.js";import{a as B,b as $,g as Z}from"./chunk-3N5UER2V.js";import{d as E}from"./chunk-FDM76GLF.js";import{$ as M,A as T,Ac as N,Ba as A,Ca as g,Da as c,Db as v,Eb as O,Fb as y,Gc as j,Lb as P,Mb as z,Nb as S,Ob as m,Pb as f,Sb as w,Vb as d,Xb as _,db as x,dc as b,ec as V,f as I,fa as a,j as k,lb as L,mb as R,pa as l,qa as u,tb as h,vb as D,ya as H,za as F}from"./chunk-L4LO2SGZ.js";var Y=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=h({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(e,o){},styles:["textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}"],encapsulation:2,changeDetection:0})}return n})(),q=$({passive:!0}),G=(()=>{class n{_platform=a(B);_ngZone=a(F);_styleLoader=a(Z);_monitoredElements=new Map;constructor(){}monitor(t){if(!this._platform.isBrowser)return k;this._styleLoader.load(Y);let e=E(t),o=this._monitoredElements.get(e);if(o)return o.subject;let s=new I,r="cdk-text-field-autofilled",C=p=>{p.animationName==="cdk-text-field-autofill-start"&&!e.classList.contains(r)?(e.classList.add(r),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0}))):p.animationName==="cdk-text-field-autofill-end"&&e.classList.contains(r)&&(e.classList.remove(r),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",C,q),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:s,unlisten:()=>{e.removeEventListener("animationstart",C,q)}}),s}stopMonitoring(t){let e=E(t),o=this._monitoredElements.get(e);o&&(o.unlisten(),o.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Q=(()=>{class n{_elementRef=a(c);_autofillMonitor=a(G);cdkAutofill=new H;constructor(){}ngOnInit(){this._autofillMonitor.monitor(this._elementRef).subscribe(t=>this.cdkAutofill.emit(t))}ngOnDestroy(){this._autofillMonitor.stopMonitoring(this._elementRef)}static \u0275fac=function(e){return new(e||n)};static \u0275dir=D({type:n,selectors:[["","cdkAutofill",""]],outputs:{cdkAutofill:"cdkAutofill"}})}return n})();var J=["firstInput"],W=["inputs"];function ee(n,i){if(n&1){let t=w();m(0,"input",5,1),d("input",function(o){let s=l(t).$index,r=_();return u(r._onInput(o,s+1))})("keydown",function(o){let s=l(t).$index,r=_();return u(r._onKeydown(o,s+1))}),f()}if(n&2){let t=i.$index,e=_();y("inputMode",e.inputMode()),v("aria-label","OTP Digit "+(t+2))}}var X=class n{codeLength=g(4);codeLengthArray=j(()=>new Array(this.codeLength()-1).fill(1));inputMode=g("numeric");filled=A();firstInput=L.required("firstInput");inputs=R("inputs",{read:c});cf=a(N);autoFillSub;focus(){this.firstInput().nativeElement.focus()}fillFromText(i){if(!i)return;let t=this.inputs();for(let e=0;e<i.length;e++){let o=i[e],s=t[e];s&&(s.nativeElement.value=o)}this.cf.detectChanges(),this.checkIfFilled()}clear(){for(let i of this.inputs())i.nativeElement.value="";this.cf.detectChanges()}_autoFilled(){let t=0,e=100;this.autoFillSub?.unsubscribe(),this.autoFillSub=T(e).subscribe(()=>{try{let o=this.firstInput().nativeElement.value;if(o){this.fillFromText(o),this.autoFillSub?.unsubscribe();return}t>10&&this.autoFillSub?.unsubscribe(),t++}catch{this.autoFillSub?.unsubscribe()}})}_onInput(i,t){let e=i;e.inputType!=="insertFromPaste"&&(e.inputType==="deleteContentBackward"?this.moveToPrev(t):(e.inputType==="insertText"||e.inputType==="deleteContentForward")&&this.moveToNext(t),this.checkIfFilled())}_onKeydown(i,t){i.key==="ArrowRight"?this.moveToNext(t):i.key==="ArrowLeft"&&this.moveToPrev(t)}_onPaste(i){let t=i.clipboardData?.getData("text");this.fillFromText(t)}checkIfFilled(){let i=this.inputs().every(e=>e.nativeElement.value!==null&&e.nativeElement.value!==void 0&&e.nativeElement.value!=="");if(!i)return;let t=this.inputs().map(e=>e.nativeElement.value).join("");i&&this.filled.emit(t)}moveToPrev(i){let t=this.prevInput(i);t&&t.nativeElement.focus()}moveToNext(i){let t=this.nextInput(i);t&&t.nativeElement.focus()}nextInput(i){let t=this.inputs();if(t.length-1===i)return;let e=i+1;return t[e]}prevInput(i){let t=this.inputs();if(i===0)return;let e=i-1;return t[e]}ngOnDestroy(){this.autoFillSub?.unsubscribe()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=h({type:n,selectors:[["app-otp-input"]],viewQuery:function(t,e){t&1&&(b(e.firstInput,J,5),b(e.inputs,W,5,c)),t&2&&V(2)},inputs:{codeLength:[1,"codeLength"],inputMode:[1,"inputMode"]},outputs:{filled:"filled"},decls:6,vars:4,consts:[["firstInput","","inputs",""],["inputs",""],["role","group","aria-labelledby","otp-label",1,"code-container",3,"paste"],["appInput","","autocomplete","one-time-code","maxlength","1",1,"code-input",3,"cdkAutofill","input","keydown","inputMode"],["appInput","","autocomplete","off","maxlength","1",1,"code-input",3,"inputMode"],["appInput","","autocomplete","off","maxlength","1",1,"code-input",3,"input","keydown","inputMode"]],template:function(t,e){if(t&1){let o=w();m(0,"div",2),d("paste",function(r){return l(o),u(e._onPaste(r))}),m(1,"input",3,0),d("cdkAutofill",function(){return l(o),u(e._autoFilled())})("input",function(r){return l(o),u(e._onInput(r,0))})("keydown",function(r){return l(o),u(e._onKeydown(r,0))}),f(),z(4,ee,2,2,"input",4,P),f()}t&2&&(O("aria-label","Enter the ",e.codeLength(),"-digit verification code sent to your phone."),x(),y("inputMode",e.inputMode()),v("aria-label","OTP Digit 1"),x(3),S(e.codeLengthArray()))},dependencies:[K,Q],styles:[".listbox-item-active[_ngcontent-%COMP%]{outline:1px solid var(--color-ring)}.code-container[_ngcontent-%COMP%]{display:flex;gap:6px;height:40px}.code-input[_ngcontent-%COMP%]{width:40px;text-align:center}"],changeDetection:0})};export{X as a};
